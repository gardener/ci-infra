periodics:
- name: ci-gardener-dependabot-ok-to-test
  interval: 1h
  cluster: gardener-prow-trusted
  decorate: true
  reporter_config:
    slack:
      channel: prow-alerts
  annotations:
    description: Sets ok-to-test label for PRs open by dependabot
    testgrid-create-test-group: "false"
  spec:
    containers:
    - image: gcr.io/k8s-prow/commenter:v20230802-d51826a399
      command:
      - commenter
      args:
      - |-
        --query=repo:gardener/ci-infra
        repo:gardener/gardener
        repo:gardener/gardener-extension-registry-cache
        repo:gardener/dependency-watchdog
        is:pr
        is:open
        author:dependabot[bot]
        label:needs-ok-to-test
      - --token=/etc/github-token/token
      - --endpoint=http://ghproxy.prow.svc.cluster.local
      - |-
        --comment=Thanks for helping @dependabot[bot] :rocket

        /ok-to-test
      - --template
      - --ceiling=10
      - --confirm
      volumeMounts:
      - name: token
        mountPath: /etc/github-token
    volumes:
    - name: token
      secret:
        secretName: github-token
